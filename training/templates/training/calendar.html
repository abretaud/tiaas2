{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block head %}
<link rel="stylesheet" href="{% static 'training/css/calendar.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css">
<link rel="stylesheet" href="https://unpkg.com/@mdi/font@6.x/css/materialdesignicons.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
<!-- <script src="{% static 'training/js/calendar.js' %}"></script> -->
{% endblock %}


{% block content %}
<h2>Calendar</h2>

<noscript>
  <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
</noscript>


<div id="app">
  <v-app>
    <v-row>
      <v-flex sm8 px-5 class="border-right">
        <v-sheet height="64">
          <v-toolbar
            flat
          >
            <v-btn
              outlined
              class="mr-4"
              color="grey darken-2"
              @click="setToday"
            >
              Today
            </v-btn>
            <v-btn
              fab
              text
              small
              color="grey darken-2"
              @click="prev"
            >
              <v-icon small>
                mdi-chevron-left
              </v-icon>
            </v-btn>
            <v-btn
              fab
              text
              small
              color="grey darken-2"
              @click="next"
            >
              <v-icon small>
                mdi-chevron-right
              </v-icon>
            </v-btn>
          </v-toolbar>
        </v-sheet>

        <v-row>
          <v-flex md6>
            <v-sheet>
              <v-container>
                <h3 v-if="$refs.calendar1" style="text-align: center;">
                  {% verbatim %}
                  {{ $refs.calendar1.title }}
                  {% endverbatim %}
                </h3>

                <v-calendar
                  ref="calendar1"
                  v-model="focus1"
                  color="primary"
                  :events="events"
                  :event-color="getEventColor"
                  :event-height="5"
                  :type="type"
                ></v-calendar>
              </v-container>
            </v-sheet>
          </v-flex>

          <v-flex md6>
            <v-sheet>
              <v-container>
                <h3 v-if="$refs.calendar2" style="text-align: center;">
                  {% verbatim %}
                  {{ $refs.calendar2.title }}
                  {% endverbatim %}
                </h3>

                <v-calendar
                  ref="calendar2"
                  v-model="focus2"
                  color="primary"
                  :events="events"
                  :event-color="getEventColor"
                  :type="type"
                ></v-calendar>
              </v-container>
            </v-sheet>
          </v-flex>

          <v-flex md6>
            <v-sheet>
              <v-container>
                <h3 v-if="$refs.calendar3" style="text-align: center;">
                  {% verbatim %}
                  {{ $refs.calendar3.title }}
                  {% endverbatim %}
                </h3>

                <v-calendar
                  ref="calendar3"
                  v-model="focus3"
                  color="primary"
                  :events="events"
                  :event-color="getEventColor"
                  :type="type"
                ></v-calendar>
              </v-container>
            </v-sheet>
          </v-flex>

          <v-flex md6>
            <v-sheet>
              <v-container>
                <h3 v-if="$refs.calendar4" style="text-align: center;">
                  {% verbatim %}
                  {{ $refs.calendar4.title }}
                  {% endverbatim %}
                </h3>

                <v-calendar
                  ref="calendar4"
                  v-model="focus4"
                  color="primary"
                  :events="events"
                  :event-color="getEventColor"
                  :type="type"
                ></v-calendar>
              </v-container>
            </v-sheet>
          </v-flex>
        </v-row>
      </v-flex>

      <v-flex sm4>
        <v-container px-5 style="height: 100%;">
          <h3>Details</h3>

          <v-container id="details-pane">

          </v-container>
        </v-container>
      </v-flex>
    </v-row>
  </v-app>
</div>


<script src='https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js'></script>
<script src='https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js'></script>

<script>
  new Vue({
    el: '#app',
    vuetify: new Vuetify(),
    data () {
      return {
        focus1: '',
        focus2: '2022-04-01',
        focus3: '2022-05-01',
        focus4: '2022-06-01',
        type: 'month',
        events: [
          {name: 'Training', start: '2022-03-01', end: '2022-03-02', color: 'red'},
          {name: 'Training', start: '2022-03-11', end: '2022-03-15', color: 'blue'},
          {name: 'Training', start: '2022-03-11', end: '2022-03-12', color: 'orange'},
        ],
      }
    },
    mounted () {
      this.$refs.calendar1.checkChange();
      this.$refs.calendar2.checkChange();
      this.$refs.calendar1.move(0);
    },
    methods: {
      getEventColor (event) {
        return event.color
      },
      setToday () {
        this.focus1 = '';
        this.focus2 = '2022-04-01';
        this.focus3 = '2022-05-01';
        this.focus4 = '2022-06-01';
      },
      prev () {
        this.$refs.calendar1.prev(2);
        this.$refs.calendar2.prev(2);
        this.$refs.calendar3.prev(2);
        this.$refs.calendar4.prev(2);
      },
      next () {
        this.$refs.calendar1.next(2);
        this.$refs.calendar2.next(2);
        this.$refs.calendar3.next(2);
        this.$refs.calendar4.next(2);
      },
    }
  });
</script>

<style scoped>
  .border-right {
    border-right: 1px solid #ccc;
  }
  #details-pane {
    border: 1px solid #ccc;
    border-radius: 1rem;
    min-height: 500px;
  }
</style>

{% endblock %}
